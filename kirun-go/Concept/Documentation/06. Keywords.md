# Keywords Reference

## Overview

This document provides a comprehensive reference of all keywords used in KIRun. Keywords are organized into logical sections to help understand their usage and context. **All keywords in KIRun are case-sensitive** and must be written exactly as specified.

## Language Structure Keywords

### Core Function Keywords

#### `FUNCTION`

Declares the start of a function definition.

**Usage:**

```kirun
FUNCTION fibonacci
```

#### `NAMESPACE`

Specifies the namespace for a function (optional).

**Usage:**

```kirun
NAMESPACE Math
```

#### `PARAMETERS`

Begins the parameter declaration section.

**Usage:**

```kirun
PARAMETERS
    n AS { "type" : "INTEGER" }
```

#### `EVENTS`

Begins the event declaration section.

**Usage:**

```kirun
EVENTS
    output
        result AS ARRAY OF INTEGER
```

#### `LOGIC`

Begins the function logic/execution section.

**Usage:**

```kirun
LOGIC
    stepName: System.Function.Call()
```

### Schema Definition Keywords

#### `AS`

Used to define schema/type for parameters, events, and variables.

**Usage:**

```kirun
n AS INTEGER
result AS ARRAY OF INTEGER
```

### Flow Control Keywords

#### `AFTER`

Specifies execution dependencies for steps.

**Usage:**

```kirun
loop: System.Loop.RangeLoop(to = Arguments.n) AFTER Steps.create.output
```

#### `COMMENT`

Adds comments to functions, steps, or schemas.

**Usage:**

```kirun
stepName: System.Function.Call() COMMENT This is a step comment
```

## Shorthand Schema Keywords

### Basic Type Keywords

#### `INTEGER`

Integer number type.

**Usage:**

```kirun
n AS INTEGER
```

#### `LONG`

Long integer type.

**Usage:**

```kirun
bigNumber AS LONG
```

#### `FLOAT`

Floating-point number type.

**Usage:**

```kirun
precision AS FLOAT
```

#### `DOUBLE`

Double-precision floating-point type.

**Usage:**

```kirun
highPrecision AS DOUBLE
```

#### `STRING`

Text string type.

**Usage:**

```kirun
name AS STRING
```

#### `BOOLEAN`

Boolean true/false type.

**Usage:**

```kirun
isActive AS BOOLEAN
```

#### `NULL`

Null value type.

**Usage:**

```kirun
empty AS NULL
```

#### `ARRAY`

Array collection type.

**Usage:**

```kirun
numbers AS ARRAY OF INTEGER
```

#### `OBJECT`

Object/map type.

**Usage:**

```kirun
person AS OBJECT
```

### Complex Type Keywords

#### `OF`

Used to specify element types in arrays or object properties.

**Usage:**

```kirun
ARRAY OF INTEGER
OBJECT OF name AS STRING
```

#### `OR`

Creates union types (anyOf in JSON Schema).

**Usage:**

```kirun
age AS (INTEGER OR STRING)
```

#### `AND`

Creates intersection types (allOf in JSON Schema).

**Usage:**

```kirun
value AS INTEGER AND (INTEGER OF MINVALUE 0)
```

#### `REFER`

References external schemas from repositories.

**Usage:**

```kirun
n REFER System.integer
user REFER UserManagement.User
```

#### `WITH DEFAULT VALUE`

Specifies default values for schemas.

**Usage:**

```kirun
schema = (ARRAY OF INTEGER) WITH DEFAULT VALUE []
```

### Lowercase Schema Keywords

#### `true`

Boolean true value.

**Usage:**

```kirun
isActive = true
```

#### `false`

Boolean false value.

**Usage:**

```kirun
isActive = false
```

#### `null`

Null value.

**Usage:**

```kirun
value = null
```

#### `nil`

Alternative null value.

**Usage:**

```kirun
value = nil
```

#### `undefined`

Undefined value.

**Usage:**

```kirun
value = undefined
```

## Expression Keywords

### Arithmetic Operators

#### `+`

Addition operator or string concatenation.

**Usage:**

```kirun
5 + 3
"Hello" + " World"
```

#### `-`

Subtraction operator.

**Usage:**

```kirun
10 - 3
```

#### `*`

Multiplication operator or string repetition.

**Usage:**

```kirun
5 * 3
"Hello" * 3
```

#### `/`

Division operator.

**Usage:**

```kirun
10 / 2
```

#### `//`

Integer division operator.

**Usage:**

```kirun
7 // 2
```

#### `%`

Modulus operator.

**Usage:**

```kirun
7 % 3
```

### Logical Operators

#### `and`

Logical AND operator.

**Usage:**

```kirun
true and false
```

#### `or`

Logical OR operator.

**Usage:**

```kirun
true or false
```

#### `not`

Logical NOT operator.

**Usage:**

```kirun
not true
```

### Comparison Operators

#### `<`

Less than comparison.

**Usage:**

```kirun
5 < 10
```

#### `<=`

Less than or equal comparison.

**Usage:**

```kirun
5 <= 5
```

#### `>`

Greater than comparison.

**Usage:**

```kirun
10 > 5
```

#### `>=`

Greater than or equal comparison.

**Usage:**

```kirun
10 >= 10
```

#### `=`

Equality comparison.

**Usage:**

```kirun
5 = 5
```

#### `!=`

Not equal comparison.

**Usage:**

```kirun
5 != 3
```

#### `??`

Nullish coalescing operator.

**Usage:**

```kirun
null ?? 'default'
```

### Bitwise Operators

#### `&`

Bitwise AND operator.

**Usage:**

```kirun
5 & 3
```

#### `|`

Bitwise OR operator.

**Usage:**

```kirun
5 | 3
```

#### `^`

Bitwise XOR operator.

**Usage:**

```kirun
5 ^ 3
```

#### `~`

Bitwise complement operator.

**Usage:**

```kirun
~5
```

#### `<<`

Bitwise left shift operator.

**Usage:**

```kirun
5 << 1
```

#### `>>`

Bitwise right shift operator.

**Usage:**

```kirun
10 >> 1
```

#### `>>>`

Bitwise unsigned right shift operator.

**Usage:**

```kirun
10 >>> 1
```

### Array and Object Operators

#### `[`

Array indexing or object property access.

**Usage:**

```kirun
array[0]
object["property"]
```

#### `..`

Array range operator.

**Usage:**

```kirun
array[1..3]
```

#### `.`

Object property access.

**Usage:**

```kirun
object.property
```

#### `?`

Conditional ternary operator.

**Usage:**

```kirun
condition ? value1 : value2
```

## Schema Validation Keywords

### String Validation

#### `PATTERN`

Regular expression pattern validation.

**Usage:**

```kirun
STRING OF PATTERN "[0-9]{1,3}"
```

#### `FORMAT`

String format validation.

**Usage:**

```kirun
STRING OF FORMAT DATETIME
```

#### `MINLENGTH`

Minimum string length.

**Usage:**

```kirun
STRING OF MINLENGTH 3
```

#### `MAXLENGTH`

Maximum string length.

**Usage:**

```kirun
STRING OF MAXLENGTH 40
```

### Numeric Validation

#### `MINIMUM`

Minimum numeric value.

**Usage:**

```kirun
INTEGER OF MINIMUM 0
```

#### `MAXIMUM`

Maximum numeric value.

**Usage:**

```kirun
INTEGER OF MAXIMUM 100
```

#### `MINVALUE`

Minimum value (alternative to MINIMUM).

**Usage:**

```kirun
INTEGER OF MINVALUE 0
```

#### `MAXVALUE`

Maximum value (alternative to MAXIMUM).

**Usage:**

```kirun
INTEGER OF MAXVALUE 100
```

#### `MULTIPLEOF`

Multiple of validation.

**Usage:**

```kirun
INTEGER OF MULTIPLEOF 2
```

### String Format Values

#### `DATETIME`

DateTime format validation.

**Usage:**

```kirun
STRING OF FORMAT DATETIME
```

#### `DATE`

Date format validation.

**Usage:**

```kirun
STRING OF FORMAT DATE
```

#### `TIME`

Time format validation.

**Usage:**

```kirun
STRING OF FORMAT TIME
```

#### `EMAIL`

Email format validation.

**Usage:**

```kirun
STRING OF FORMAT EMAIL
```

#### `REGEX`

Regular expression format validation.

**Usage:**

```kirun
STRING OF FORMAT REGEX
```

## Parameter Type Keywords

### Parameter Types

#### `EXPRESSION`

Dynamic expressions evaluated at runtime.

**Usage:**

```kirun
parameterName: EXPRESSION
```

#### `CONSTANT`

Static values provided at compile time.

**Usage:**

```kirun
parameterName: CONSTANT
```

#### `VALUE`

Literal values (deprecated, use EXPRESSION).

**Usage:**

```kirun
parameterName: VALUE
```

## Built-in Event Keywords

### Standard Events

#### `output`

Standard output event generated by all functions.

**Usage:**

```kirun
stepName: System.Function.Call()
    output
        nextStep: System.AnotherFunction.Call()
```

#### `iteration`

Event generated by loop functions for each iteration.

**Usage:**

```kirun
loop: System.Loop.RangeLoop(to = Arguments.n)
    iteration
        processItem: System.Function.Call()
```

## Fixed Store Names

KIRun uses fixed store names for data access. These are not keywords but predefined store identifiers:

- **Context**: Runtime execution store for variables
- **Arguments**: Read-only store for function parameters
- **Steps**: Store for data generated by step events
- **Page**: UI page data store (external)
- **Store**: Application-level data storage (external)
- **Authorities**: Security context store (external)

**Usage Examples:**

```kirun
Context.variableName
Arguments.n
Steps.stepName.eventName.propertyName
Page.form.name
Store.user.data
Authorities.permissions
```

## Usage Guidelines

1. **Case Sensitivity**: All keywords are case-sensitive and must match exactly
2. **Lowercase Keywords**: Only `true`, `false`, `null`, `nil`, `undefined` are lowercase
3. **Indentation**: Use proper indentation to show structure and event flow
4. **Naming**: Choose meaningful names for functions, parameters, and steps
5. **Comments**: Use COMMENT keyword for documentation
6. **Dependencies**: Use AFTER keyword when execution order matters
7. **Schema Safety**: Always define schemas for parameters and events
8. **Expression Nesting**: Use `{{ }}` for nested expressions within strings

## Best Practices

- Use descriptive step names for better readability
- Organize complex schemas using proper indentation
- Leverage external schema references with REFER keyword
- Use appropriate data stores (Context, Arguments, Steps) for data access
- Follow consistent naming conventions across functions
- Include comments for complex logic or business rules
- Use default values appropriately to handle edge cases
